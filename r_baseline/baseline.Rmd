---
title: "Gettimng some baseline baselines"
output: html_notebook
---

```{r}
library(baseline)
data(milk)
row = (milk$spectra[1,1:5000, drop=FALSE])
```

Plot the data now

```{r}
plot(x = 1:length(row), y=row)  
```

Looks a bit like a PXRD pattern ...

## Try some baseline correction methods

```{r}
bc.fillPeaks <- baseline(row, wm=200, ws=400, method='rollingBall')
```

plot it 

```{r}
plot(x = 1:length(row), y=row)  
lines(x = 1:length(row), y=bc.fillPeaks@baseline, col='green')  
```   
Try another method
```{r}
bc2.fillPeaks <- baseline(row, hwm=500, method='medianWindow', end=TRUE)
```
plot it
```{r}
plot(x = 1:length(row), y=row)  
lines(x = 1:length(row), y=bc2.fillPeaks@baseline, col='green')  
```   
```{r}
running_median = runmed(row, k = 2*500 + 1, endrule = 'constant')
running_median[5000]
```

